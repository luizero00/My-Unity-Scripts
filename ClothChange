using System.Collections;
using System.Collections.Generic;
using UnityEngine;

[System.Serializable] public class ArmorPart
{
	public string name;
	public KeyCode keyCode;

	[HideInInspector] public int meshIndex = 0;

	private GameObject activeMesh;
	public List<GameObject> meshComponents;
}

public class ClothChange : MonoBehaviour {

	public List<ArmorPart> armorParts;

	void Start () {

		foreach (var item in armorParts)
		{			
			for (int i = 0; i < item.meshComponents.Count; i++)
			{
				item.meshComponents[i].SetActive(false);
			}

			item.activeMesh = item.meshComponents[PlayerPrefs.GetInt(item.name + "PlayerPrefsData")];
			item.activeMesh.SetActive(true);
		}
	}
	
	void Update () {

		foreach (var item in armorParts)
		{
			if (Input.GetKeyDown(item.keyCode))
			{
				item.activeMesh.SetActive(false);

				if (item.meshIndex < item.meshComponents.Count-1)
				{
					item.meshIndex++;
				}
				else
				if (item.meshIndex >= item.meshComponents.Count-1)
				{
					item.meshIndex = 0;
				}

				item.activeMesh = item.meshComponents[item.meshIndex];
				item.activeMesh.SetActive(true);

				PlayerPrefs.SetInt(item.name + "PlayerPrefsData", item.meshIndex);
			}
		}
		
	}
}
